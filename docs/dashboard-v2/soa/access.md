# 访问策略

点击服务治理菜单，展开后再点击访问策略进入访问策略列表页面，列表页如下图所示：

![](http://data.eolinker.com/course/NAVTI1e04c6fded90fcfa56e280da5668fea21b909394ac.png)

左侧显示按环境属性分类的所有集群，默认选中第一个环境下的第一个集群，而右侧区域显示该集群下所有访问策略。
s
在操作上，可对该集群新建访问策略，发布策略，对已有策略启停、查看、删除以及排优先级。

启停状态表示着该策略是否生效。
## 功能展示
### 新建访问策略
新建访问策略如下图所示：

![](http://data.eolinker.com/course/LGFr4TP9f2066e49572ef128d0f37d243e28c049220769f.gif)

访问策略原理：配置筛选条件，用来筛选出符合条件的API请求，即筛选流量，按照配置访问规则执行允许访问或拒绝访问生效范围。

访问策略不仅仅支持IP黑白名单，也支持应用访问的黑白名单，应用与API间的黑白名单，应用与后端系统的黑白名单，十分灵活且强大。

举个例子，筛选流量选择应用A，生效范围API1、API2、API3，访问规则执行允许，发布上线后，网关只允许应用A请求API1、API2、API3三个接口，其他任何接口都不允许请求。

访问规则：设置成允许，生效范围内即可被视为白名单，生效范围以外的不允许放行请求；设置成拒绝，生效范围内即可被视为黑名单，生效范围以外的允许放行请求。

注意：若访问规则为允许，不添加生效范围，筛选流量默认放行；若访问规则为拒绝，不添加生效范围，筛选流量默认拒绝

部分字段说明：

| 字段名称     | 字段描述                                                         |
|----------|--------------------------------------------------------------|
| 策略名称     | 唯一策略标识                                                       |
| 优先级      | 值范围1-999，值越低优先级越高，当不同策略具有一定相同的筛选条件时，系统会根据策略优先级高低，来确定请求流量命中策略 |
| 筛选条件     | 支持多种组合条件筛选流量，如应用、API、上游、IP、标签属性等；不添加条件，即所有请求到网关的流量，全流量       |
| 访问规则     | 仅支持允许或拒绝                                                     |
| 生效范围     | 支持多种组合条件，但与筛选条件互斥                                            |
| 继续匹配其他策略 | 默认否，如果是开，则网关会继续匹配低优先级包含全部或部分筛选条件的策略                          |

配置筛选条件如新建流量策略中筛选条件操作即可。

属性名称可分为应用、API、上游服务、API路径、请求方式、IP以及应用的自定义属性，属性值则为对应类型的数据，可多选。

当某类型的值被全选时，该策略发布后，新建某类型的数据请求流量也会被策略命中。例如，当属性名称选择应用，属性值全选，往后创建的应用请求流量也符合该策略筛选。

### 发布访问策略
列表右侧点击发布，弹出访问策略如下图所示：

![](http://data.eolinker.com/course/NhmqbXk6ce62dd6deee2193d05a64bd8379156657f2faf2.gif)
* 发布名称：系统根据时间自动生成，用作发布版本历史查看。
* 策略列表：该集群下所有状态为未上线或待更新的策略数据。

### 编辑优先级
列表中策略数据默认按照优先级从高到低，优先级值正序，优先级列可编辑，编辑优先级如流量策略中的编辑优先级操作。

不同访问策略优先级不允许同值，值范围1-999。

当修改某条策略的优先级后，列表策略数据会根据优先级值正序重新排序。