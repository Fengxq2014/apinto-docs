# 流量策略
点击服务治理菜单，展开后再点击流量策略进入流量策略列表页面，列表页如下图所示：


![](http://data.eolinker.com/course/bupQ41nfc0be2d8a628aa303b0583d691ba1eed86559b47.png)
左侧显示按环境属性分类的所有集群，默认选中第一个环境下的第一个集群，而右侧区域显示该集群下所有流量策略。
在操作上，可对该集群新建流量策略，发布策略，对已有策略启停、查看、删除以及排优先级。
启停状态表示着该策略是否生效。
## 功能展示
### 新建流量策略
新建流量策略如下图所示：
![](http://data.eolinker.com/course/bvusMwp1c476e1ddf938bfb4a53d4a3fd39acef5baca242.gif)
流量策略原理：配置筛选条件，用来筛选出符合条件的API请求，即筛选流量，按照配置限流规则执行，上线后达到限流目的。
部分字段说明：

|字段名称|字段描述|
|---|---|
|策略名称|唯一策略标识|
|优先级|值范围1-999，值越低优先级越高，当不同策略具有一定相同的筛选条件时，系统会根据策略优先级高低，来确定请求流量命中策略|
|筛选条件|支持多种组合条件筛选流量，如应用、API、上游、IP、标签属性等；不添加条件，即所有请求到网关的流量，全流量|
|限流维度|支持多种维度进行计数限流，如应用、API、上游、IP、策略|
|每秒限流数|默认0值，不限流，值范围为自然数，配置指定值时，1秒内按维度计数，超过该值的请求则限制转发上游并返回配置的响应内容|
|每秒限报文总量|默认0值，不限流，值范围为自然数，配置指定值时，1秒内按维度计报文总量，超过该值的请求则限制转发上游并返回配置的响应内容|

其他限流规则里的字段处理逻辑与每秒限流数、每秒报文总量一致，只是计数时间长度不一样，只要触发任一限流规则字段的值，都将会进行限流处理。

配置筛选条件如下图所示：

![](http://data.eolinker.com/course/GkMdvTd8481f1a8c19635f1c2cb8e4c2da9040521b12822.gif)

属性名称可分为应用、API、上游服务、API路径、请求方式、IP以及应用的自定义属性，属性值则为对应类型的数据，可多选。
当某类型的值被全选时，该策略发布后，新建某类型的数据请求流量也会被策略命中。例如，当属性名称选择应用，属性值全选，往后创建的应用请求流量也符合该策略筛选。

#### 发布流量策略
列表右侧点击发布，弹出流量策略如下图所示：

![](http://data.eolinker.com/course/ILYEjnT110ca10378bf9eca3c028953e0deceda18e758c5.gif)
* 发布名称：系统根据时间自动生成，用作发布版本历史查看。

* 策略列表：该集群下所有状态为未上线或待更新的策略数据。
#### 编辑优先级
列表中策略数据默认按照优先级从高到低，优先级值正序，优先级列可编辑，编辑优先级如下图所示：

![](http://data.eolinker.com/course/ZcIW9XTf3dbb49045a5c69498cd8cc46d87183f57ee94b3.gif)

不同流量策略优先级不允许同值，值范围1-999。

当修改某条策略的优先级后，列表策略数据会根据优先级值正序重新排序，需要重新发布到网关集群才会生效。